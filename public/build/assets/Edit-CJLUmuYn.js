import{K as f,m as N,r as u,j as e,S as v}from"./app-DqhGHzoz.js";import{A as y}from"./AdminLayout-D05e8_fH.js";const C=()=>{var c;const{props:p}=f(),{product:s,categories:g}=p,{data:r,setData:d,put:x,processing:l,errors:t}=N({name:s.name,description:s.description||"",price:s.price.toString(),category_id:((c=s.category)==null?void 0:c.id.toString())||"",image:null,discount:s.discount?s.discount.toString():""}),[n,h]=u.useState(null),[i,o]=u.useState(!1),b=a=>{a.preventDefault(),x(route("admin.products.update",s.id))},j=a=>{if(a.preventDefault(),!n)return;o(!0);const m=new FormData;m.append("image",n),v.post(route("admin.products.image.store",s.id),m,{onFinish:()=>o(!1)})};return e.jsx(y,{children:e.jsxs("div",{className:"max-w-lg mx-auto bg-white shadow-lg rounded-lg p-6",children:[e.jsx("h1",{className:"text-2xl font-bold mb-4",children:"Editar Produto"}),e.jsxs("form",{onSubmit:b,className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block font-medium",children:"Nome"}),e.jsx("input",{type:"text",value:r.name,onChange:a=>d("name",a.target.value),required:!0,maxLength:255,className:"w-full border-gray-300 rounded-md p-2"}),t.name&&e.jsx("p",{className:"text-red-500 text-sm",children:t.name})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block font-medium",children:"Descrição"}),e.jsx("textarea",{value:r.description,onChange:a=>d("description",a.target.value),className:"w-full border-gray-300 rounded-md p-2"}),t.description&&e.jsx("p",{className:"text-red-500 text-sm",children:t.description})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block font-medium",children:"Preço"}),e.jsx("input",{type:"number",value:r.price,onChange:a=>d("price",a.target.value),required:!0,className:"w-full border-gray-300 rounded-md p-2"}),t.price&&e.jsx("p",{className:"text-red-500 text-sm",children:t.price})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block font-medium",children:"Desconto"}),e.jsx("input",{type:"number",value:r.discount,onChange:a=>d("discount",a.target.value),className:"w-full border-gray-300 rounded-md p-2"}),t.discount&&e.jsx("p",{className:"text-red-500 text-sm",children:t.discount})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block font-medium",children:"Categoria"}),e.jsxs("select",{value:r.category_id,onChange:a=>d("category_id",a.target.value),required:!0,className:"w-full border-gray-300 rounded-md p-2",children:[e.jsx("option",{value:"",children:"Selecione uma categoria"}),g.map(a=>e.jsx("option",{value:a.id,children:a.name},a.id))]}),t.category_id&&e.jsx("p",{className:"text-red-500 text-sm",children:t.category_id})]}),e.jsx("button",{type:"submit",disabled:l,className:`w-full text-white py-2 rounded-md transition ${l?"bg-gray-400 cursor-not-allowed":"bg-green-500 hover:bg-green-600"}`,children:l?"Atualizando...":"Atualizar Produto"})]}),e.jsxs("form",{onSubmit:j,className:"mt-6 space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block font-medium",children:"Imagem"}),e.jsx("input",{type:"file",onChange:a=>h(a.target.files?a.target.files[0]:null),className:"w-full border-gray-300 rounded-md p-2"}),t.image&&e.jsx("p",{className:"text-red-500 text-sm",children:t.image})]}),e.jsx("button",{type:"submit",disabled:i,className:`w-full text-white py-2 rounded-md transition ${i?"bg-gray-400 cursor-not-allowed":"bg-blue-500 hover:bg-blue-600"}`,children:i?"Enviando Imagem...":"Atualizar Imagem"})]})]})})};export{C as default};
